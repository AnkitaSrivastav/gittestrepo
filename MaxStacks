import java.util.Scanner;
import java.util.Stack;



 public class MaxStack {
		public static void main(String[] args) {
			 Stack stack=new Stack();
			Stack maxStack=new Stack();
			int maxValue=0;
			int top1=0;
			int top2=0;
			int ch=1;
			Scanner ele=new Scanner(System.in);
			int i=0;
			int n= ele.nextInt();
			while(i<n){
			ch= ele.nextInt();
			i++;
			
			switch(ch)
			{
			case 1: 
					int k=ele.nextInt();
					stack.push(new Integer(k));
					
					
						if(maxStack.empty())
						{
							maxStack.push(new Integer(k));
							
						}
						else if((Integer)maxStack.peek()<k){
							maxStack.push(new Integer(k));
						
						}
						
						break;
					
			case 2: 
					if(stack.pop()==maxStack.peek())
                        maxStack.pop();
					break;
			case 3: 
					if(!maxStack.empty())
					System.out.println(maxStack.peek());
				
					break;
			default: 
			
					break;
					
			}
			
			}
			
			}
		}
	
